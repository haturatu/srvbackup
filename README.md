# srvbackup
## ?
サーバーのバックアップをするためのスクリプトです。  
主にcronジョブで実行感覚を設定します。  
  
## 設定
シェルスクリプト上で設定を行います。  
```bash
MOUNT_DIR="/your/mount/point"   # バックアップを保存するディレクトリのマウント先
SRC_DIR="/want/to/backup/dir"   # バックアップしたいディレクトリ
BK_DIR="backupdir"              # バックアップ時に作成するディレクトリ名
EXCLUDE_FILE=""                 # 除外ファイル指定、rsyncコマンドで指定します。例 : --exclude=your/path
```

もし引数で指定したい場合は以下のようにしてください  

```bash
MOUNT_DIR="$1" 
SRC_DIR="$2" 
BK_DIR="$3"
EXCLUDE_FILE="$4"
```

どちらにも利点があります。  
### 前者の場合
1. シェルスクリプトの実行ファイルを別にし、好きなファイル名で実行できる
2. バックアップ時の動作に個別で独自処理入れたい場合対象の`.sh`ファイルだけ編集すればよい
3. ただし、あとから全てをまとめて変更するときには`sed -i "s/your/phrase/g" ./*.sh`などのようにして行う
### 後者の場合
1. `crontab`に入れたときにバックアップ元、バックアップ先などが明示的に一発で見やすい
2. 変更を加えたい場合は一つのシェルスクリプトを編集するだけでよい
3. なんとなくだが、crontabが汚くなりそう
